<!DOCTYPE html>
<html lang="he">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>×¤×•×§×™××•×Ÿ ×‘×¨×§×ª ×‘×¢×‘×¨×™×ª</title>

    <meta property="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="×¤×•×§×™××•×Ÿ ×‘×¨×§×ª ×‘×¢×‘×¨×™×ª">
    <meta property="og:description" content="ğŸ²ğŸ‰ ××“×¨×™×š ×”×ª×§× ×” ×œ××©×—×§×™× ×¤×•×§×™××•×Ÿ ×‘×¨×§×ª ×‘×¢×‘×¨×™×ª.ğŸ²ğŸ‰">
    <meta property="og:image" content="og-image.png">
    <meta property="og:type" content="website">

    <!-- W3.CSS -->
    <link rel="stylesheet" href="./styles/w3.css">

    <style>
        body,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: "Lato", sans-serif;
        }

        .w3-bar,
        h1,
        button {
            font-family: "Montserrat", sans-serif;
        }

        .fa-anchor,
        .fa-coffee {
            font-size: 200px;
        }
    </style>

    <style id="__web-inspector-hide-shortcut-style__">
        .__web-inspector-hide-shortcut__, .__web-inspector-hide-shortcut__ *,
        .__web-inspector-hidebefore-shortcut__::before, .__web-inspector-hideafter-shortcut__::after {
            visibility: hidden !important;
        }
    </style>

    <!-- Rom Patcher JS needed CSS -->
    <link type="text/css" rel="stylesheet" href="./rom-patcher-js/style.css" media="all" />
    <link type="text/css" rel="stylesheet" href="./color.css" media="all" />

    <!-- Ensure ROM_PATCHER_JS_PATH is defined without redeclaring it -->
    <script>
        // Set worker path only if not already set
        window.ROM_PATCHER_JS_PATH = window.ROM_PATCHER_JS_PATH || './rom-patcher-js/';
    </script>

    <!-- Load RomPatcher webapp (this script will spawn workers using the path above) -->
    <script type="text/javascript" src="./rom-patcher-js/RomPatcher.webapp.js"></script>

    <!-- Rom Patcher JS initialization (keeps your previous logic) -->
    <script type="text/javascript">
        window.addEventListener('load', function (evt) {
            try {
                fetch("./patches.info")
                    .then(res => {
                        if (!res.ok) throw new Error('patches.info not found');
                        return res.json();
                    })
                    .then(patchInfo => {
                        // RomPatcherWeb should be provided by RomPatcher.webapp.js
                        RomPatcherWeb.initialize(
                            {
                                language: 'en',
                                requireValidation: true,
                                allowDropFiles: true
                            },
                            patchInfo
                        );

                        const downloadBtn = document.getElementById('rom-patcher-button-download');
                        const patchSelect = document.getElementById('rom-patcher-select-patch');

                        downloadBtn.onclick = () => {
                            const selectedIndex = patchSelect.selectedIndex;
                            if (selectedIndex < 0) return;

                            const patch = patchInfo.patches[selectedIndex];
                            const link = document.createElement('a');
                            link.href = `./patches/${patch.file}`;
                            link.download = patch.file.split('/').pop();
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                        };
                    })
                    .catch(err => {
                        console.error(err);
                        // Display a friendly message inside the rom-patcher root
                        const root = document.getElementById('rom-patcher-root');
                        if (root) {
                            root.innerHTML = '<p style="color: red;">Rom Patcher initialization error: ' + (err.message || 'unknown') + '</p>';
                        }
                    });
            } catch (err) {
                var message = err.message;
                if (/incompatible browser/i.test(message) || /variable RomPatcherWeb/i.test(message))
                    message = 'Your browser is outdated and it is not compatible with this app.';

                const root = document.getElementById('rom-patcher-root');
                if (root) {
                    root.innerHTML = message;
                    root.style.color = 'red';
                } else {
                    console.error(message);
                }
            }
        });
    </script>

    <!-- Marked for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body dir="RTL">
    <!-- Navbar -->
    <div class="w3-top">
        <div class="w3-bar w3-light-grey w3-card w3-right-align w3-large">
            <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-light-grey"
                href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
            <a href="#logo" class="w3-bar-item w3-button w3-padding-large w3-indigo">×¨××© ×”×“×£</a>
            <a href="#installation-guide" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">××“×¨×™×š ×”×ª×§× ×”</a>
            <a href="#downloads" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">×”×•×¨×“×•×ª</a>
            <a href="#about" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">××•×“×•×ª</a>
            <a href="#contact" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">×¦×•×¨ ×§×©×¨</a>
        </div>

        <!-- Navbar on small screens -->
        <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
            <a href="#installation-guide" class="w3-bar-item w3-button w3-padding-large">××“×¨×™×š ×”×ª×§× ×”</a>
            <a href="#downloads" class="w3-bar-item w3-button w3-padding-large">×”×•×¨×“×•×ª</a>
            <a href="#about" class="w3-bar-item w3-button w3-padding-large">××•×“×•×ª</a>
            <a href="#contact" class="w3-bar-item w3-button w3-padding-large">×¦×•×¨ ×§×©×¨</a>
        </div>
    </div>

    <!-- Header -->
    <header class="w3-container w3-light-grey w3-center" style="padding: 128px 16px">
        <!-- changed id to logoImage to match the script that checks it -->
        <img src="Logo.png" class="w3-image w3-center" id="logoImage" alt="Logo"><br>
        <h1 class="w3-center"><b>×‘×¨×§×ª</b></h1>
    </header>

    <!-- First Grid -->
    <div class="w3-row-padding w3-padding-64 w3-container">
        <div class="w3-content">
            <h1 id="installation-guide"><u>××“×¨×™×š ×”×ª×§× ×”</u></h1>
            <h5 class="w3-padding-32 w3-text-grey">×”×¡×‘×¨ ××™×š ×œ×©×™× ××ª ×”×˜×œ××™</h5>

        <div id="rom-patcher-container" style="justify-content:center;align-items:center;text-align:center;"></div>
	<script>
		fetch('./info.md')
			.then(response => {
				if (!response.ok) {
					return "";
				}
				return response.text();
			})
			.then(text => {
				const container = document.getElementById('rom-patcher-container');
				if (text.trim()) {
					container.innerHTML = marked.parse(text);
				} else {
					container.innerHTML = "";
				}
			})
			.catch(err => {
				document.getElementById('rom-patcher-container').innerHTML = "";
				console.error(err);
			});
	</script>

	<!-- Rom Patcher JS container -->
	<!--
		The following elements are required for Rom Patcher JS to work:
			#rom-patcher-input-file-rom
			#rom-patcher-select-patch
			#rom-patcher-button-apply
		The rest of elements are informative and can be removed, though it's recommended to keep them for a better user experience.
	-->
	<div id="rom-patcher-container" style="justify-content:center;align-items:center;text-align:center;">
		<span class="text-mono text-muted">
			Base ROM:<br>
			PokÃ©mon Emerald (USA, Europe)
		</span>
	</div>
	<div id="rom-patcher-container">
		<div class="rom-patcher-row margin-bottom" id="rom-patcher-row-file-rom">
			<div class="text-right"><label for="rom-patcher-input-file-rom" data-localize="ROM file:">ROM file:</label></div>
			<div class="rom-patcher-container-input">
				<input type="file" id="rom-patcher-input-file-rom" class="empty no-file-selector-button">
			</div>
		</div>
		<div class="margin-bottom text-selectable text-mono text-muted" id="rom-patcher-rom-info">
			<div class="rom-patcher-row">
				<div class="text-right">CRC32:</div>
				<div class="text-truncate"><span id="rom-patcher-span-crc32"></span></div>
			</div>
			<div class="rom-patcher-row">
				<div class="text-right">MD5:</div>
				<div class="text-truncate"><span id="rom-patcher-span-md5"></span></div>
			</div>
			<div class="rom-patcher-row">
				<div class="text-right">SHA-1:</div>
				<div class="text-truncate"><span id="rom-patcher-span-sha1"></span></div>
			</div>
			<div class="rom-patcher-row" id="rom-patcher-row-info-rom">
				<div class="text-right">ROM:</div>
				<div class="text-truncate"><span id="rom-patcher-span-rom-info"></span></div>
			</div>
		</div>

		<div class="rom-patcher-row margin-bottom" id="rom-patcher-row-file-patch">
			<div class="text-right"><label for="rom-patcher-input-file-patch" data-localize="Patch file:">Patch file:</label>
			</div>
			<div class="rom-patcher-container-input">
				<select id="rom-patcher-select-patch" disabled="" style="display: none;"></select>
			<span id="rom-patcher-span-loading-embeded-patch" style="display: block;">Unzipping... <span class="rom-patcher-spinner" id="rom-patcher-spinner-patch"></span></span><div id="rom-patcher-container-optional-patches" style="display: none;"></div></div>
		</div>
		<div class="rom-patcher-row margin-bottom" id="rom-patcher-row-patch-description">
			<div class="text-right text-mono text-muted" data-localize="Description:">Description:</div>
			<div class="text-truncate" id="rom-patcher-patch-description"></div>
		</div>
		<div class="rom-patcher-row margin-bottom text-selectable text-mono text-muted" id="rom-patcher-row-patch-requirements">
			<div class="text-right text-mono" id="rom-patcher-patch-requirements-type">ROM requirements:</div>
			<div class="text-truncate" id="rom-patcher-patch-requirements-value"></div>
		</div>

		<div class="text-center" id="rom-patcher-row-apply">
			<div id="rom-patcher-row-error-message" class="margin-bottom show"><span id="rom-patcher-error-message">Error unzipping file</span>
			</div>
			<button id="rom-patcher-button-apply" data-localize="Apply patch" disabled="">Apply patch</button>
			<button id="rom-patcher-button-download" data-localize="Download patch">Download patch</button>
		</div>
	</div>

	<div id="rom-patcher-powered" class="text-center">
		<a href="https://github.com/marcrobledo/RomPatcher.js" target="_blank" style="color: var(--page-rom-patcher-link-color, --rom-patcher-link-color);"><img src="./rom-patcher-js/assets/powered_by_rom_patcher_js.png" loading="lazy">Powered by Rom Patcher
			JS</a>
	</div>

	<!-- Load Other Rom Hack Page Elements -->
	<script src="./config.js"></script>
	<script>
		(() => {
			const config = window.TARP_CONFIG || {};
			const title = config.title || "Untitled Rom Hack";
			const base = config.base || "Not Specified";

			document.body.innerHTML = document.body.innerHTML.replaceAll("POKÃ©MON BAREKET", title);
			document.body.innerHTML = document.body.innerHTML.replaceAll("PokÃ©mon Emerald (USA, Europe)", base);
			document.title = title;

			const logoImg = document.getElementById("logoImage");
			if (logoImg) {
				logoImg.onerror = () => {
					logoImg.style.display = "none";
				};
			}
		})();
	</script></div>
    </div>

    <!-- Second Grid -->
    <div class="w3-row-padding w3-light-grey w3-padding-64 w3-container">
        <div class="w3-content">
            <h1 id="downloads">×”×•×¨×“×•×ª</h1>
            <h5 class="w3-padding-32 w3-text-grey">
                (××œ×” ×©×¨×•×¦×™× ×œ×§××¤×œ ×‘×¢×¦×× ××• ×¡×ª× ×œ×”×¡×ª×›×œ ×‘×§×‘×¦×™× ××•×–×× ×™× ×œ×‘×§×¨ ×‘×¨×™×¤×• ×‘-<a href="https://github.com/shachar700/pokeemerald-fork/">GitHub</a>)</h5><br>
        </div>
    </div>

    <!-- Third Grid -->
    <div class="w3-row-padding w3-padding-64 w3-container">
        <div class="w3-content">
            <div>
                <h1 class="w3-center" id="about">××•×“×•×ª</h1>
                <h5 class="w3-padding-32">
                    ×œ××™×“×¢ × ×•×¡×£ ××• ×¡×ª× ×›×“×™ ×œ×”×¢×™×£ ××‘×˜ ×¢×œ ×”×§×‘×¦×™×, ××•×–×× ×™× ×œ×‘×§×¨ ×‘<a href="https://github.com/shachar700/pokeemerald-fork/">×’×™×˜×”××‘ ×©×œ ×”×¤×¨×•×™×§×˜</a> :)<br><br>

                    ×”×¤×¨×•×™×§×˜ ×”×–×” ×”×ª××¤×©×¨ ××š ×•×¨×§ ×‘×–×›×•×ª ×”×× ×©×™× ×”× ×¤×œ××™× ×©×œ×§×—×• ×‘×• ×—×œ×§.<br>
                    ×œ××œ×” ×©×™×¡×™×™××• ××ª ×”××©×—×§, ×ª×’×œ×• ×©×‘×¡×•×£ ×”××©×—×§ ×× ×—× ×• ××¤×™×œ×• × ××¦××™× ×‘×§×¨×“×™×˜×™×â€¦ ××‘×œ ×œ××œ×” ×©×œ× ×™×’×™×¢×• ×›×œ ×›×š ×¨×—×•×§,
                    ××œ×” ×”×©××•×ª ×©×œ ×›×œ ××œ×• ×©×œ×§×—×• ×—×œ×§ ×‘×¤×¨×•×™×§×˜ ×”×–×”.
                </h5>

                <p class="w3-center w3-xlarge"><b>
                        <a href="https://www.linkedin.com/in/shahar-berenson/">×©×—×¨ ×‘×¨× ×¡×•×Ÿ</a><br>
                        ×©×’×™× ×‘×œ××©<br>
                        ×œ×™××•×¨ ×›×œ×¤×•×Ÿ (LIJI) ×›×œ×¤×•×Ÿ<br>
                        × ×’×” ×©×§×“<br>
                        ×. ×©. ××œ×‘×•×™×<br>
                    </b>
                </p>
            </div>
        </div>
    </div>

    <!-- Fourth Grid -->
    <div class="w3-row-padding w3-light-grey w3-padding-64 w3-container">
        <div class="w3-content">
            <h1 id="contact">×¦×•×¨ ×§×©×¨</h1>
            <h5 class="w3-padding-32">
                ×©××œ×•×ª? ×˜×¢× ×•×ª? ××¢× ×•×ª?
                ×¦×¨×• ×§×©×¨!
                ××•×–×× ×™× ×œ×¤× ×•×ª ×œ×©×—×¨, shachar700, ×‘×“×™×¡×§×•×¨×“ ×œ×›×œ ×©××œ×” ××• ×¤× ×™×”.
            </h5>
        </div>
    </div>

    <!-- Footer -->
    <footer class="w3-container w3-padding-64 w3-center w3-opacity">
        <div class="w3-xlarge w3-padding-32">
            <a href="https://github.com/shachar700/pokeemerald-fork/ ">
                <i class="fa fa-github w3-hover-opacity w3-xxlarge"></i>
            </a>
        </div>
        <p dir="LTR">
            Powered by GitHub &amp;
            <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a><br>
            Â© 2005 PokÃ©mon. Â© 1995â€“2005 Nintendo/Creatures Inc./GAME FREAK inc.<br>
            PokÃ©mon are trademarks of Nintendo. Other trademarks are the property of
            their respective owners. <br>
            Any and all copyrighted material is the property of its respective
            owners.
        </p>
    </footer>

    <script>
        // Used to toggle the menu on small screens when clicking on the menu button
        function myFunction() {
            var x = document.getElementById("navDemo");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
            } else {
                x.className = x.className.replace(" w3-show", "");
            }
        }
    </script>

    <!-- keep any browser-extension iframes removed in production; left here as you had them -->
    <iframe id="dl-egmenneb" src="chrome-extension://egmennebgadmncfjafcemlecimkepcle/html/downloading.html" style="display: none;"></iframe>
    <iframe id="dl-rec-egmenneb" src="chrome-extension://egmennebgadmncfjafcemlecimkepcle/html/recording.html" allow="camera *; microphone *; display-capture *" style="display: none;"></iframe>
</body>
</html>
